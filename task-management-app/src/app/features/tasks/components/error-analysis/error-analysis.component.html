<!-- エラー分析チャート -->
<div class="charts-container" *ngIf="!loading && !error">
  <div class="chart-actions">
    <button mat-button (click)="exportToCSV()">
      <mat-icon>download</mat-icon>
      CSVエクスポート
    </button>
  </div>

  <div class="chart">
    <h3>エラー発生率の推移</h3>
    <canvas baseChart
      [data]="errorTrendChartData"
      [options]="errorTrendChartOptions"
      type="line">
    </canvas>
  </div>
  <div class="chart">
    <h3>エラータイプ分布</h3>
    <canvas baseChart
      [data]="errorTypeChartData"
      [options]="errorTypeChartOptions"
      type="pie"
      (chartClick)="onChartClick($event, $event.active, 'errorType')">
    </canvas>
  </div>
  <div class="chart">
    <h3>時間帯別エラー発生数</h3>
    <canvas baseChart
      [data]="hourlyErrorChartData"
      [options]="hourlyErrorChartOptions"
      type="bar"
      (chartClick)="onChartClick($event, $event.active, 'hourly')">
    </canvas>
  </div>
  <div class="chart">
    <h3>ユーザー別エラー発生数</h3>
    <canvas baseChart
      [data]="userImpactChartData"
      [options]="userImpactChartOptions"
      type="bar"
      (chartClick)="onChartClick($event, $event.active, 'userImpact')">
    </canvas>
  </div>
</div> 